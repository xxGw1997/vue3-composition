{"version":3,"file":"vue.js","sources":["../src/reactivity/computed.ts","../src/shared/index.ts","../src/reactivity/effect.ts","../src/reactivity/baseHandlers.ts","../src/reactivity/reactive.ts","../src/reactivity/ref.ts","../node_modules/tslib/tslib.es6.js","../src/runtime-dom/nodeOps.ts","../src/runtime-core/vnode.ts","../src/runtime-core/apiCreateApp.ts","../src/runtime-core/component.ts","../src/runtime-core/renderer.ts","../src/runtime-core/h.ts","../src/runtime-dom/patchProp.ts","../src/runtime-dom/index.ts"],"sourcesContent":["export function computed(){\r\n  \r\n}","export const isObject = (val) => typeof val == 'object' && val !== null\r\nexport const isSymbol = (val) => typeof val == 'symbol'\r\nexport const isArray = Array.isArray\r\nexport const isInteger = key => '' + parseInt(key, 10) === key\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty\r\n\r\nexport const hasOwn = (val, key) => hasOwnProperty.call(val, key)\r\n\r\nexport const hasChanged = (value, oldValue) => value !== oldValue\r\n\r\nexport const isString = (value) => typeof value == 'string'\r\n\r\nexport const isFunction = value => typeof value == 'function'\r\n\r\nexport * from './shapeFlags'","import { isArray, isInteger } from \"../shared/index\";\r\n\r\nexport function effect(fn, options: any = {}) {  //effect => vue watcher\r\n  //options默认没有用,但是在写计算属性时会用上\r\n  const effect = createReactiveEffect(fn, options)\r\n  if (!options.lazy) {\r\n    effect()\r\n  }\r\n  return effect\r\n}\r\n\r\nlet activeEffect //用来存储当前的effect函数\r\nlet uid = 0\r\nconst effectStack = []\r\nfunction createReactiveEffect(fn, options) {\r\n  const effect = function () {\r\n    if (!effectStack.includes(effect)) {  //防止递归执行\r\n      try {\r\n        activeEffect = effect\r\n        effectStack.push(activeEffect)\r\n        //计算属性有返回值,所以需要return\r\n        return fn()  //需要执行的逻辑,内部会对依赖的数据进行取值get()操作,在取值时可以拿到activeEffects\r\n      } finally {\r\n        effectStack.pop()\r\n        activeEffect = effectStack[effectStack.length - 1]\r\n      }\r\n    }\r\n  }\r\n  effect.id = uid++\r\n  effect.deps = []  //用来表示effect中依赖了哪些属性\r\n  effect.options = options\r\n  return effect\r\n}\r\n\r\n//{object:{key:[effect1,effect2]}}\r\nconst targetMap = new WeakMap()\r\n//将属性和effect做一个关联\r\nexport function track(target, key) {\r\n  if (activeEffect == undefined) {\r\n    return\r\n  }\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) {\r\n    targetMap.set(target, (depsMap = new Map()))\r\n  }\r\n  let dep = depsMap.get(key)\r\n  if (!dep) {\r\n    depsMap.set(key, (dep = new Set()))\r\n  }\r\n  if (!dep.has(activeEffect)) {\r\n    dep.add(activeEffect)\r\n    activeEffect.deps.push(dep) //双向绑定\r\n  }\r\n}\r\n\r\n//触发更新\r\nexport function trigger(target, type, key, value?, oldValue?) {   //{ name: 'ywx', age: 23, address: 'hangzhou' }\r\n  const depsMap = targetMap.get(target)\r\n  if (!depsMap) return\r\n  const run = effects => {\r\n    if (effects) effects.forEach(effect => effect())\r\n  }\r\n  //数组有特殊情况\r\n  if (key === 'length' && isArray(target)) {\r\n    depsMap.forEach((dep, key) => {\r\n      if (key == 'length' || key >= value) {  //在数组中如果修改的长度小于原有数组的长度时，也要更新视图\r\n        run(dep)\r\n      }\r\n      switch (type) {\r\n        case 'add':\r\n          if (isArray(target)) {  //给数组如果通过索引增加选项\r\n            //如果页面中直接使用了数组,也会对数组进行取值操作,\r\n            //对length进行收集,新增属性时,直接触发length即可\r\n            if (isInteger(key)) run(depsMap.get('length'))\r\n          }\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    })\r\n  } else {\r\n    //对象的处理\r\n    if (key != void 0) {//说明修改了key\r\n      run(depsMap.get(key))\r\n    }\r\n  }\r\n}","import { isSymbol, isObject, isArray, isInteger, hasOwn, hasChanged } from \"../shared/index\";\r\nimport { reactive } from \"./reactive\";\r\nimport { track, trigger } from './effect'\r\n\r\nfunction createGetter() {\r\n  return function get(target, key, receiver) {  //获取属性的时候会自动执行get()方法\r\n    const res = Reflect.get(target, key, receiver)  //相当于target[key]\r\n    //如果取值是symbol类型 则需要忽略\r\n    if (isSymbol(key)) {\r\n      return res\r\n    }\r\n    //依赖收集\r\n    //在调用effect()时,会将effect中使用到的属性添加对应的effect方法\r\n    //个人理解的操作就是,收集每一个使用到该属性(比如name)的effect函数(比如将这个name属性赋值给页面上某个div中innerHTML的函数)给收集起来\r\n    //因为在这个函数中使用到了name属性,所以name属性变化时,需要重新执行该函数\r\n    //最后会生成一个map  {Object:{name:[effect1,effect2],age:[...]} \r\n    //effect1操作比如就是把name属性赋值给页面上div1的内容中  \r\n    //effect2就是比如把name属性赋值给页面上div2的内容中\r\n    track(target, key)\r\n    console.log('数据get')\r\n\r\n    if (isObject(res)) {  //取值是对象 再进行递归代理->懒递归\r\n      return reactive(res)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\nfunction createSetter() {\r\n  return function set(target, key, value, receiver) {  //设置属性的值的时候会自动执行set()方法\r\n    //新增还是修改\r\n    const oldValue = target[key]\r\n    //看一下有没有这个属性\r\n\r\n    //1、数组新增属性     2、对象新增属性\r\n    const hadKey = isArray(target) && isInteger(key) ? Number(key) < target.length : hasOwn(target, key)\r\n    const res = Reflect.set(target, key, value, receiver)\r\n    if (!hadKey) {\r\n      trigger(target, 'add', key, value)\r\n    } else if (hasChanged(value, oldValue)) {\r\n      trigger(target, 'set', key, value, oldValue)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\n//为了预先放参数\r\nconst get = createGetter()\r\nconst set = createSetter()\r\n\r\n\r\nexport const mutableHandlers = {\r\n  get,\r\n  set\r\n}\r\n","import { isObject } from \"../shared/index\"\r\nimport { mutableHandlers } from \"./baseHandlers\"\r\n\r\nexport function reactive(target){\r\n  //将目标对象变成响应式对象,Proxy\r\n  return createReactiveObject(target,mutableHandlers) //核心操作就是当读取文件时做依赖收集,当数据变化时重新执行effect函数\r\n}\r\n\r\nconst proxyMap = new WeakMap()\r\n\r\nfunction createReactiveObject(target,baseHandlers){\r\n  //如果目标不是对象,则直接返回\r\n  if(!isObject(target)) return target\r\n  const existingProxy = proxyMap.get(target)\r\n  if(existingProxy) return existingProxy  //如果存在,则表示之前代理过,直接返回\r\n  //只对最外层对象做代理,默认不会递归,而且不会重新重写对象中的属性\r\n  const proxy = new Proxy(target,baseHandlers)\r\n  proxyMap.set(target,proxy)  //将需要代理的对象和代理的结果做成一个映射表\r\n  return proxy\r\n}","export function ref(){\r\n  \r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export const nodeOps = {\r\n  createElement(type) {\r\n    return document.createElement(type)\r\n  },\r\n  setElementText(el, text) {\r\n    el.textContent = text\r\n  },\r\n  insert(child, parent, anchor = null) {\r\n    parent.insertBefore(child, anchor)\r\n  },\r\n  remove(child) {\r\n    const parent = child.parentNode\r\n    if (parent) parent.removeChild(child)\r\n  }\r\n}","import { isString, ShapeFlags, isObject, isArray } from \"../shared/index\"\r\n\r\n\r\nexport function createVnode(type, props: any = {}, children = null) {\r\n  //type 可能是对象 也有可能是字符串\r\n  const shapeFlag = isString(type) ? ShapeFlags.ELEMENT : isObject(type) ? ShapeFlags.STATEFUL_COMPONENT : 0\r\n  const vnode = { //用来表示dom结果,也可以表示组件\r\n    type,\r\n    props,\r\n    children,\r\n    component: null, //组件的实例\r\n    el: null,      //虚拟节点和真实节点做一个映射关系\r\n    key: props.key,\r\n    shapeFlag     //用来标识当前虚拟节点的类型  元素、组件....\r\n  }\r\n  console.log(\"shapeFlag:\",shapeFlag)\r\n  if (isArray(children)) {\r\n    //或操作不仅可以表示当前节点的类型,还能表示儿子组件的类型\r\n    // 00000001 元素\r\n    // 00010000 儿子组件\r\n    // 00010001 代表两者都有\r\n    vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN\r\n  } else {\r\n    //00000100\r\n    //00001000\r\n    //00001100\r\n    vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN\r\n  }\r\n\r\n\r\n  return vnode\r\n}","import { createVnode } from \"./vnode\"\r\n\r\nexport function createAppAPI(render) {\r\n  return (rootComponent) => {\r\n    const app = {\r\n      mount(container) {\r\n        const vnode = createVnode(rootComponent)\r\n\r\n        render(vnode, container)\r\n      }\r\n    }\r\n    return app\r\n  }\r\n}","import { isFunction } from \"../shared/index\"\r\n\r\nexport function createComponentInstance(vnode) {\r\n  const instance = {\r\n    type: vnode.type,\r\n    props: {},\r\n    vnode,\r\n    render: null,\r\n    isMounted: false,     //默认组件没有挂载\r\n    setupState: null\r\n  }\r\n  // console.log('instance.type:',instance.type)\r\n  return instance\r\n}\r\n\r\nexport const setupComponent = instance => {\r\n  //1、源码中会对属性初始化\r\n  //2、会对插槽进行初始化\r\n  //3、调用setup方法\r\n  setupStatefulComponent(instance)\r\n}\r\n\r\nfunction setupStatefulComponent(instance) {\r\n  const Component = instance.type   //组件的虚拟节点\r\n  const { setup } = Component\r\n  console.log(\"setup:\", setup)\r\n  if (setup) {\r\n    const setUpResult = setup()      //获取setup返回的值\r\n    console.log(\"setupReasult:\", setUpResult)\r\n    //判断返回值类型\r\n    handleSetupResult(instance, setUpResult)\r\n  }\r\n}\r\n\r\nfunction handleSetupResult(instance, setUpResult) {\r\n  if (isFunction(setUpResult)) {\r\n    instance.render = setUpResult\r\n  } else {\r\n    instance.setupState = setUpResult\r\n  }\r\n  finishComponentSetup(instance)\r\n}\r\n\r\nfunction finishComponentSetup(instance) {\r\n  const Component = instance.type\r\n  // console.log('instance.type::',Component)\r\n  if (Component.render) {\r\n    instance.render = Component.render\r\n  } else if (!instance.render) {\r\n    //compile(Component.template) 将模板编译成render函数\r\n  }\r\n\r\n}","import { createAppAPI } from \"./apiCreateApp\"\r\nimport { ShapeFlags } from \"../shared/index\"\r\nimport { createComponentInstance, setupComponent } from \"./component\"\r\nimport { effect } from \"../reactivity/index\"\r\n\r\nexport function createRenderer(options) {\r\n  return baseCreateRenderer(options)\r\n}\r\n\r\nfunction baseCreateRenderer(options) {\r\n\r\n  const {\r\n    createElement: hostCreateElement,\r\n    patchProp: hostPatchProp,\r\n    setElementText: hostSetElementText,\r\n    insert: hostInsert,\r\n    remove: hostRemove\r\n  } = options\r\n\r\n  const mountElement = (vnode, container) => {\r\n    //n2是虚拟节点,container是容器\r\n    let { shapeFlag, props } = vnode\r\n    let el = vnode.el = hostCreateElement(vnode.type)\r\n    //创建儿子节点 \r\n    if (shapeFlag & ShapeFlags.ELEMENT) {\r\n      hostSetElementText(el, vnode.children)\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      mountChildren(vnode.children, el)\r\n    }\r\n    if (props) {\r\n      for (let key in props) {\r\n        hostPatchProp(el, key, null, props[key])\r\n      }\r\n    }\r\n    hostInsert(el, container)\r\n\r\n  }\r\n\r\n  const mountChildren = (children, container) => {\r\n    for (let i = 0; i < children.length; i++) {\r\n      patch(null, children[i], container)\r\n    }\r\n  }\r\n\r\n  const patchElement = (n1, n2, container) => {\r\n\r\n  }\r\n\r\n  const mountComponent = (initialVnode, container) => {\r\n    //组件挂载  1、创建组件的实例  2、初始化组件(找到组件的render方法)  3、执行render\r\n    //组件的实例要记住组件的状态\r\n    const instance = initialVnode.component = createComponentInstance(initialVnode)\r\n    setupComponent(instance)\r\n    //调用render方法,如果render方法中数据变了 会重新渲染\r\n    setupRenderEffect(instance, initialVnode, container)   //给组件创建一个effect,用于渲染\r\n  }\r\n\r\n  const setupRenderEffect = (instance, initialVnode, container) => {\r\n    //组件的effect\r\n    effect(function componentEffect() {\r\n      if (!instance.isMounted) {\r\n        //渲染组件中的内容\r\n        const subTree = instance.subTree = instance.render()    //组件对应渲染的结果\r\n        console.log('subTree:',subTree)\r\n        patch(null, subTree, container)\r\n\r\n        instance.isMounted = true\r\n      } else {\r\n        //更新逻辑\r\n        let prev = instance.subTree   //上一次的渲染结果\r\n        let next = instance.render()\r\n        console.log(prev, next)\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  const updateComponent = (n1, n2, container) => {\r\n\r\n  }\r\n\r\n  const processComponent = (n1, n2, container) => {\r\n    if (n1 == null) {\r\n      mountComponent(n2, container)\r\n    } else {\r\n      updateComponent(n1, n2, container)\r\n    }\r\n  }\r\n\r\n  const processElement = (n1, n2, container) => {\r\n    if (n1 == null) {\r\n      mountElement(n2, container)\r\n    } else {\r\n      patchElement(n1, n2, container)\r\n    }\r\n  }\r\n\r\n  const patch = (n1, n2, container) => {\r\n    console.log('n2:',n2)\r\n    let { shapeFlag } = n2\r\n    if (shapeFlag & ShapeFlags.ELEMENT) {\r\n      processElement(n1, n2, container)\r\n    } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\r\n      processComponent(n1, n2, container)\r\n    }\r\n  }\r\n\r\n  const render = (vnode, container) => {\r\n    patch(null, vnode, container)\r\n  }\r\n\r\n  return {\r\n    createApp: createAppAPI(render)\r\n  }\r\n}","import { createVnode } from \"./vnode\";\r\n\r\nexport function h(type, props = {}, children = null) {\r\n  return createVnode(type, props, children)\r\n}","\r\nfunction patchClass(el, value) {\r\n  if (value == null) {\r\n    value = ''\r\n  }\r\n  el.className = value\r\n}\r\n\r\nfunction patchStyle(el, prev, next) {\r\n  //{color:red}  {background:red}\r\n  const style = el.style\r\n  if (!next) {\r\n    el.removeAttribute('style')\r\n  } else {\r\n    for (let key in next) {\r\n      style[key] = next[key]\r\n    }\r\n    if (prev) {\r\n      for (let key in prev) {\r\n        if (next[key] == null) {\r\n          style[key] = ''\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction patchAttr(el, key, value) {\r\n  if (value == null) {\r\n    el.removeAttribute(key)\r\n  } else {\r\n    el.setAttribute(key, value)\r\n  }\r\n}\r\n\r\nexport function patchProp(el, key, prevValue, nextValue) {\r\n  switch (key) {\r\n    case 'class':\r\n      patchClass(el, nextValue)\r\n      break;\r\n    case 'style':\r\n      //{color:'red'}\r\n      patchStyle(el, prevValue, nextValue)\r\n      break;\r\n    default:\r\n      patchAttr(el, key, nextValue)\r\n      break;\r\n  }\r\n}","import { nodeOps } from \"./nodeOps\"\r\nimport { createRenderer } from \"../runtime-core/index\"\r\nimport { patchProp } from \"./patchProp\"\r\n\r\nconst renderOptions = { ...nodeOps, patchProp }\r\n\r\nfunction ensureRenderer() {\r\n  return createRenderer(renderOptions)\r\n}\r\n\r\nexport function createApp(rootComponent) {\r\n  //1、根据组件创建一个渲染器\r\n  const app = ensureRenderer().createApp(rootComponent)\r\n  const { mount } = app\r\n  app.mount = function (container) {\r\n    container = document.querySelector(container)\r\n    //1、挂载时需要先将容器清空 再进行挂载\r\n    container.innerHTML = ''\r\n    console.log('mount:',mount)\r\n    mount(container)\r\n  }\r\n\r\n\r\n  return app\r\n}"],"names":[],"mappings":"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"}